name: Poetry Setup Action

inputs:
  poetry-version:
    required: true
    type: string
    default: latest

runs:
  using: composite
  steps:
  - if: ${{ inputs.poetry-version != 'latest' }}
    shell: bash
    run: pip install --upgrade pip setuptools wheel poetry==${{ inputs.poetry-version }}
  - if: ${{ inputs.poetry-version == 'latest' }}
    shell: bash
    run: pip install --upgrade pip setuptools wheel poetry
  - name: Configure Poetry
    shell: bash
    run: |
      poetry config virtualenvs.create true
      poetry config virtualenvs.in-project true
      poetry config installer.max-workers 1
